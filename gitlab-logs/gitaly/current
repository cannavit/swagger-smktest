{"level":"info","msg":"Wrapper started","time":"2021-04-05T15:24:19.410Z","wrapper":492}
{"level":"info","msg":"finding gitaly","pid_file":"/var/opt/gitlab/gitaly/gitaly.pid","time":"2021-04-05T15:24:19.410Z","wrapper":492}
{"error":"open /var/opt/gitlab/gitaly/gitaly.pid: no such file or directory","level":"error","msg":"find gitaly","time":"2021-04-05T15:24:19.410Z","wrapper":492}
{"level":"info","msg":"spawning a process","time":"2021-04-05T15:24:19.410Z","wrapper":492}
{"gitaly":498,"level":"info","msg":"monitoring gitaly","time":"2021-04-05T15:24:19.412Z","wrapper":492}
time="2021-04-05T15:24:19Z" level=info msg="Starting GitalyversionGitaly, version 13.10.2"
time="2021-04-05T15:24:19Z" level=warning msg="git path not configured. Using default path resolution" resolvedPath=/opt/gitlab/embedded/bin/git
time="2021-04-05T15:24:19Z" level=info msg="clearing disk cache object folder" path=/var/opt/gitlab/git-data/repositories
time="2021-04-05T15:24:19Z" level=info msg="moving disk cache object folder to /var/opt/gitlab/git-data/repositories/+gitaly/tmp/diskcache710511503" path=/var/opt/gitlab/git-data/repositories
time="2021-04-05T15:24:19Z" level=info msg="disk cache object folder doesn't exist, no need to remove" path=/var/opt/gitlab/git-data/repositories
time="2021-04-05T15:24:19Z" level=info msg="Starting file walker for /var/opt/gitlab/git-data/repositories/+gitaly/cache" path=/var/opt/gitlab/git-data/repositories/+gitaly/cache
time="2021-04-05T15:24:19Z" level=info msg="Starting file walker for /var/opt/gitlab/git-data/repositories/+gitaly/state" path=/var/opt/gitlab/git-data/repositories/+gitaly/state
time="2021-04-05T15:24:19Z" level=info msg="cleared all cache object files in /var/opt/gitlab/git-data/repositories/+gitaly/tmp/diskcache710511503 after 98.157µs" path=/var/opt/gitlab/git-data/repositories
{"level":"info","msg":"finished tempdir cleaner walk","storage":"default","time":"2021-04-05T15:24:19.995Z","time_ms":0}
{"level":"info","msg":"starting RSS monitor","supervisor.name":"gitaly-ruby.1","supervisor.rss_threshold":209715200,"time":"2021-04-05T15:24:19.996Z"}
{"level":"info","msg":"starting RSS monitor","supervisor.name":"gitaly-ruby.0","supervisor.rss_threshold":209715200,"time":"2021-04-05T15:24:19.996Z"}
{"level":"warning","msg":"grpc: addrConn.createTransport failed to connect to {/var/opt/gitlab/gitaly/internal_sockets/ruby.0  \u003cnil\u003e 0 \u003cnil\u003e}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/opt/gitlab/gitaly/internal_sockets/ruby.0: connect: no such file or directory\". Reconnecting...","pid":498,"system":"system","time":"2021-04-05T15:24:19.996Z"}
{"level":"warning","msg":"grpc: addrConn.createTransport failed to connect to {/var/opt/gitlab/gitaly/internal_sockets/ruby.1  \u003cnil\u003e 0 \u003cnil\u003e}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/opt/gitlab/gitaly/internal_sockets/ruby.1: connect: no such file or directory\". Reconnecting...","pid":498,"system":"system","time":"2021-04-05T15:24:19.996Z"}
{"level":"warning","msg":"spawned","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","498","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","supervisor.pid":519,"time":"2021-04-05T15:24:19.996Z"}
{"level":"warning","msg":"spawned","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","498","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","supervisor.pid":520,"time":"2021-04-05T15:24:19.996Z"}
{"address":"/var/opt/gitlab/gitaly/gitaly.socket","level":"info","msg":"listening at unix address","time":"2021-04-05T15:24:20.013Z"}
{"address":"/var/opt/gitlab/gitaly/internal_sockets/internal.sock","level":"info","msg":"listening at unix address","time":"2021-04-05T15:24:20.013Z"}
{"address":"localhost:9236","level":"info","msg":"starting prometheus listener","time":"2021-04-05T15:24:20.017Z"}
{"level":"info","msg":"maintenance: daily scheduled","pid":498,"scheduled":"2021-04-06T12:00:00Z","time":"2021-04-05T15:24:20.017Z"}
{"level":"info","msg":"PID 519 BUNDLE_GEMFILE=/opt/gitlab/embedded/service/gitaly-ruby/Gemfile","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","498","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","time":"2021-04-05T15:24:20.294Z"}
{"level":"info","msg":"PID 520 BUNDLE_GEMFILE=/opt/gitlab/embedded/service/gitaly-ruby/Gemfile","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","498","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","time":"2021-04-05T15:24:20.302Z"}
{"correlation_id":"01F2HA68229ZFJBX08R4QG0Q42","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-04-05T15:25:12.004Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"","grpc.request.glRepository":"","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:02.914Z","grpc.time_ms":0.044,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:02.914Z"}
{"correlation_id":"01F2HA683N2E107V4KERJFVGAH","diskcache":"bfc1f198-f0ec-45f0-8146-5c68608a0a6d","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"CreateRepository","grpc.request.deadline":"2021-04-05T15:25:12.005Z","grpc.request.fullMethod":"/gitaly.RepositoryService/CreateRepository","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:02.965Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:02.973Z"}
{"correlation_id":"01F2HA683N2E107V4KERJFVGAH","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"CreateRepository","grpc.request.deadline":"2021-04-05T15:25:12.005Z","grpc.request.fullMethod":"/gitaly.RepositoryService/CreateRepository","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:02.965Z","grpc.time_ms":8.71,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:02.973Z"}
{"correlation_id":"01F2HA68433C2DFDJGQQ18J6BN","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-04-05T15:25:12.009Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:02.979Z","grpc.time_ms":0.077,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:02.979Z"}
{"correlation_id":"01F2HA6845VZ4EY1E4AB4YHXZ4","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"HasLocalBranches","grpc.request.deadline":"2021-04-05T15:25:12.001Z","grpc.request.fullMethod":"/gitaly.RepositoryService/HasLocalBranches","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:02.981Z","grpc.time_ms":1.591,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:02.982Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-04-05T15:25:12.006Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:02.987Z","grpc.time_ms":0.079,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:02.987Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","diskcache":"c06b8be8-8de3-4543-a9d6-3b39a3045874","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"SetConfig","grpc.request.deadline":"2021-04-05T15:25:12.008Z","grpc.request.fullMethod":"/gitaly.RepositoryService/SetConfig","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:02.988Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:02.994Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"SetConfig","grpc.request.deadline":"2021-04-05T15:25:12.008Z","grpc.request.fullMethod":"/gitaly.RepositoryService/SetConfig","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:02.988Z","grpc.time_ms":6.228,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:02.995Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-04-05T15:25:12.010Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:03.000Z","grpc.time_ms":0.082,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.000Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","diskcache":"9ac41c42-fc45-45d9-8f77-fa52e3d0be83","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"CreateRepository","grpc.request.deadline":"2021-04-05T15:25:13.001Z","grpc.request.fullMethod":"/gitaly.RepositoryService/CreateRepository","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:03.001Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.009Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"CreateRepository","grpc.request.deadline":"2021-04-05T15:25:13.001Z","grpc.request.fullMethod":"/gitaly.RepositoryService/CreateRepository","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:03.001Z","grpc.time_ms":7.837,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.009Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-04-05T15:25:13.002Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:03.012Z","grpc.time_ms":0.054,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.012Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"HasLocalBranches","grpc.request.deadline":"2021-04-05T15:25:13.003Z","grpc.request.fullMethod":"/gitaly.RepositoryService/HasLocalBranches","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:03.013Z","grpc.time_ms":1.547,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.015Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"FindDefaultBranchName","grpc.request.deadline":"2021-04-05T15:25:13.003Z","grpc.request.fullMethod":"/gitaly.RefService/FindDefaultBranchName","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RefService","grpc.start_time":"2021-04-05T15:25:03.323Z","grpc.time_ms":1.577,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.324Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"HasLocalBranches","grpc.request.deadline":"2021-04-05T15:25:13.006Z","grpc.request.fullMethod":"/gitaly.RepositoryService/HasLocalBranches","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-04-05T15:25:03.326Z","grpc.time_ms":1.507,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.328Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"FindAllBranchNames","grpc.request.deadline":"2021-04-05T15:25:13.002Z","grpc.request.fullMethod":"/gitaly.RefService/FindAllBranchNames","grpc.request.glProjectPath":"gitlab-instance-809889dc/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.request.topLevelGroup":"@hashed","grpc.service":"gitaly.RefService","grpc.start_time":"2021-04-05T15:25:03.352Z","grpc.time_ms":1.636,"level":"info","msg":"finished streaming call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.353Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"ServerInfo","grpc.request.deadline":"2021-04-05T15:25:13.010Z","grpc.request.fullMethod":"/gitaly.ServerService/ServerInfo","grpc.service":"gitaly.ServerService","grpc.start_time":"2021-04-05T15:25:03.360Z","grpc.time_ms":1.45,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.361Z"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","duration_ms":0,"error":"Post \"http://unix/api/v4/internal/allowed\": dial unix /var/opt/gitlab/gitlab-workhorse/sockets/socket: connect: no such file or directory","level":"error","method":"POST","msg":"Internal API unreachable","time":"2021-04-05T15:25:03.398Z","url":"http://unix/api/v4/internal/allowed"}
{"correlation_id":"3f40088525be77e64101eb159a8d9d0f","error":"GitLab: Internal API unreachable","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"UserCommitFiles","grpc.request.deadline":"2021-04-05T21:25:03.371Z","grpc.request.fullMethod":"/gitaly.OperationService/UserCommitFiles","grpc.service":"gitaly.OperationService","grpc.start_time":"2021-04-05T15:25:03.371Z","level":"warning","msg":"stopping transaction because pre-receive hook failed","peer.address":"@","pid":498,"span.kind":"server","system":"grpc","time":"2021-04-05T15:25:03.398Z"}
{"branch_name":"bWFzdGVy","correlation_id":"3f40088525be77e64101eb159a8d9d0f","error":"update reference: GitLab: Internal API unreachable","force":false,"grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"UserCommitFiles","grpc.request.deadline":"2021-04-05T21:25:03.371Z","grpc.request.fullMethod":"/gitaly.OperationService/UserCommitFiles","grpc.service":"gitaly.OperationService","grpc.start_time":"2021-04-05T15:25:03.371Z","level":"error","msg":"user commit files failed","peer.address":"@","pid":498,"repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","repository_storage":"default","span.kind":"server","start_branch_name":null,"start_repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","start_repository_storage":"default","start_sha":"","system":"grpc","time":"2021-04-05T15:25:03.398Z"}
{"branch_name":"bWFzdGVy","correlation_id":"3f40088525be77e64101eb159a8d9d0f","diskcache":"fc9af8b4-5da6-4e29-94da-dece40f68b09","force":false,"grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"UserCommitFiles","grpc.request.deadline":"2021-04-05T21:25:03.371Z","grpc.request.fullMethod":"/gitaly.OperationService/UserCommitFiles","grpc.service":"gitaly.OperationService","grpc.start_time":"2021-04-05T15:25:03.371Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":498,"repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","repository_storage":"default","span.kind":"server","start_branch_name":null,"start_repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","start_repository_storage":"default","start_sha":"","system":"grpc","time":"2021-04-05T15:25:03.403Z"}
{"branch_name":"bWFzdGVy","correlation_id":"3f40088525be77e64101eb159a8d9d0f","force":false,"grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.method":"UserCommitFiles","grpc.request.deadline":"2021-04-05T21:25:03.371Z","grpc.request.fullMethod":"/gitaly.OperationService/UserCommitFiles","grpc.service":"gitaly.OperationService","grpc.start_time":"2021-04-05T15:25:03.371Z","grpc.time_ms":31.731,"level":"info","msg":"finished streaming call with code OK","peer.address":"@","pid":498,"repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","repository_storage":"default","span.kind":"server","start_branch_name":null,"start_repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","start_repository_storage":"default","start_sha":"","system":"grpc","time":"2021-04-05T15:25:03.403Z"}
{"gitaly":498,"level":"warning","msg":"forwarding signal","signal":1,"time":"2021-04-05T15:27:33.879Z","wrapper":492}
time="2021-04-05T15:27:34Z" level=info msg="Starting GitalyversionGitaly, version 13.10.2"
time="2021-04-05T15:27:34Z" level=warning msg="git path not configured. Using default path resolution" resolvedPath=/opt/gitlab/embedded/bin/git
time="2021-04-05T15:27:34Z" level=info msg="clearing disk cache object folder" path=/var/opt/gitlab/git-data/repositories
time="2021-04-05T15:27:34Z" level=info msg="moving disk cache object folder to /var/opt/gitlab/git-data/repositories/+gitaly/tmp/diskcache361368430" path=/var/opt/gitlab/git-data/repositories
time="2021-04-05T15:27:34Z" level=info msg="disk cache object folder doesn't exist, no need to remove" path=/var/opt/gitlab/git-data/repositories
time="2021-04-05T15:27:34Z" level=info msg="Starting file walker for /var/opt/gitlab/git-data/repositories/+gitaly/cache" path=/var/opt/gitlab/git-data/repositories/+gitaly/cache
time="2021-04-05T15:27:34Z" level=info msg="Starting file walker for /var/opt/gitlab/git-data/repositories/+gitaly/state" path=/var/opt/gitlab/git-data/repositories/+gitaly/state
time="2021-04-05T15:27:34Z" level=info msg="cleared all cache object files in /var/opt/gitlab/git-data/repositories/+gitaly/tmp/diskcache361368430 after 69.121µs" path=/var/opt/gitlab/git-data/repositories
{"level":"info","msg":"finished tempdir cleaner walk","storage":"default","time":"2021-04-05T15:27:34.515Z","time_ms":0}
{"level":"info","msg":"starting RSS monitor","supervisor.name":"gitaly-ruby.0","supervisor.rss_threshold":209715200,"time":"2021-04-05T15:27:34.515Z"}
{"level":"info","msg":"starting RSS monitor","supervisor.name":"gitaly-ruby.1","supervisor.rss_threshold":209715200,"time":"2021-04-05T15:27:34.515Z"}
{"level":"warning","msg":"spawned","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","1551","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","supervisor.pid":1589,"time":"2021-04-05T15:27:34.516Z"}
{"level":"warning","msg":"spawned","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","1551","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","supervisor.pid":1590,"time":"2021-04-05T15:27:34.517Z"}
{"address":"/var/opt/gitlab/gitaly/gitaly.socket","level":"info","msg":"listening at unix address","time":"2021-04-05T15:27:34.541Z"}
{"address":"/var/opt/gitlab/gitaly/internal_sockets/internal.sock","level":"info","msg":"listening at unix address","time":"2021-04-05T15:27:34.541Z"}
{"address":"localhost:9236","level":"info","msg":"starting prometheus listener","time":"2021-04-05T15:27:34.548Z"}
{"level":"info","msg":"maintenance: daily scheduled","pid":1551,"scheduled":"2021-04-06T12:00:00Z","time":"2021-04-05T15:27:34.548Z"}
{"graceful_timeout":60000000000,"level":"warning","msg":"starting grace period","time":"2021-04-05T15:27:34.548Z"}
{"level":"info","msg":"Upgrade succeeded","time":"2021-04-05T15:27:34.548Z"}
{"error":"signal: killed","level":"warning","msg":"exited","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","498","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","time":"2021-04-05T15:27:34.559Z"}
{"error":"signal: killed","level":"warning","msg":"exited","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","498","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","time":"2021-04-05T15:27:34.571Z"}
{"error":"graceful upgrade: completed","level":"error","msg":"shutting down","time":"2021-04-05T15:27:34.571Z"}
{"level":"info","msg":"Gitaly stopped","time":"2021-04-05T15:27:34.571Z"}
{"gitaly":498,"level":"warning","msg":"forwarding signal","signal":17,"time":"2021-04-05T15:27:34.574Z","wrapper":492}
{"error":"os: process already finished","gitaly":498,"level":"error","msg":"can't forward the signal","signal":17,"time":"2021-04-05T15:27:34.574Z","wrapper":492}
{"level":"info","msg":"PID 1590 BUNDLE_GEMFILE=/opt/gitlab/embedded/service/gitaly-ruby/Gemfile","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","1551","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","time":"2021-04-05T15:27:34.872Z"}
{"level":"info","msg":"PID 1589 BUNDLE_GEMFILE=/opt/gitlab/embedded/service/gitaly-ruby/Gemfile","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","1551","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","time":"2021-04-05T15:27:34.881Z"}
{"gitaly":498,"level":"error","msg":"wrapper for gitaly shutting down","time":"2021-04-05T15:27:35.435Z","wrapper":492}
{"level":"info","msg":"Wrapper started","time":"2021-04-05T15:27:35.439Z","wrapper":1610}
{"level":"info","msg":"finding gitaly","pid_file":"/var/opt/gitlab/gitaly/gitaly.pid","time":"2021-04-05T15:27:35.439Z","wrapper":1610}
{"level":"info","msg":"adopting a process","time":"2021-04-05T15:27:35.445Z","wrapper":1610}
{"gitaly":1551,"level":"info","msg":"monitoring gitaly","time":"2021-04-05T15:27:35.445Z","wrapper":1610}
